@import 'tailwindcss';
@import 'fumadocs-ui/css/purple.css';
@import 'fumadocs-ui/css/preset.css';
@import 'fumadocs-twoslash/twoslash.css';
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* Scan fumadocs packages from app-level node_modules (symlinked to workspace root) */
@source "../../node_modules/fumadocs-ui";
@source "../../node_modules/fumadocs-twoslash";

/* =========================================
   BRAND COLORS - ESLint Interlace
   Override fumadocs neutral theme with purple accent
   WCAG AA compliant color choices
   ========================================= */

/* Light mode - high contrast for accessibility */
:root {
  /* Primary purple - meets WCAG AA for large text on white */
  --color-fd-primary: hsl(263, 80%, 45%) !important;
  --color-fd-primary-foreground: hsl(0, 0%, 100%) !important;

  /* Foreground color for lines and text */
  --color-fd-foreground: hsl(0, 0%, 3.9%) !important;

  /* Improved muted foreground for better readability (4.5:1 contrast ratio) */
  --color-fd-muted-foreground: hsl(0, 0%, 40%) !important;

  /* Ring/focus color matching brand */
  --color-fd-ring: hsl(263, 70%, 55%) !important;
}

/* Dark mode - lighter purple for dark backgrounds, WCAG AA compliant */
.dark {
  /* Lighter purple for dark mode - maintains 4.5:1 contrast on dark bg */
  --color-fd-primary: hsl(270, 75%, 75%) !important;
  --color-fd-primary-foreground: hsl(0, 0%, 5%) !important;

  /* Foreground color for dark mode */
  --color-fd-foreground: hsl(0, 0%, 92%) !important;

  /* Improved muted foreground for dark mode readability */
  --color-fd-muted-foreground: hsl(0, 0%, 65%) !important;

  /* Ring/focus color for dark mode */
  --color-fd-ring: hsl(270, 70%, 70%) !important;
}

/* =========================================
   CLERK TOC STYLE FIX
   Only the arbitrary property utilities that Tailwind v4 cannot generate
   ========================================= */

/* TOC indicator thumb - the moving purple bar (Tailwind v4 arbitrary props) */
.h-\(--fd-height\) {
  height: var(--fd-height);
}

.top-\(--fd-top\) {
  top: var(--fd-top);
}

/* TOC indicator transition - smooth animation when scrolling */
.transition-\[top\,height\] {
  transition-property: top, height !important;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
  transition-duration: 150ms !important;
}

/* Direct targeting of TOC indicator thumb for transition */
#nd-toc .bg-fd-primary {
  transition-property: top, height !important;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
  transition-duration: 150ms !important;
}

/* =========================================
   CLEAN TOC STYLE - Single line indicator
   Hide the "staircase" gray lines and diagonal connectors
   Keep only the purple sliding indicator
   ========================================= */

/* Hide the gray vertical rail segments (causes staircase effect) */
#nd-toc .bg-fd-foreground\/10 {
  display: none !important;
}

/* Hide the diagonal SVG connector lines between depth levels */
#nd-toc svg line.stroke-fd-foreground\/10,
#nd-toc .stroke-fd-foreground\/10 {
  display: none !important;
}

/* =========================================
   POPOVER TOC SPACING FIX
   Ensure proper padding for items in the popover TOC
   Match the clerk style item offsets
   ========================================= */

/* Popover TOC items - ensure minimum padding from left edge */
[data-toc-popover-content] a {
  padding-inline-start: 14px !important;
}

/* Nested items in popover get more padding */
[data-toc-popover-content] a[data-depth="3"] {
  padding-inline-start: 26px !important;
}

[data-toc-popover-content] a[data-depth="4"],
[data-toc-popover-content] a[data-depth="5"],
[data-toc-popover-content] a[data-depth="6"] {
  padding-inline-start: 36px !important;
}

@layer components {
  /* =================================================
   * RESPONSIVE TOC VISIBILITY  
   * - xl+ (â‰¥1280px): Show side TOC, hide popover TOC
   * - <xl (<1280px): Show popover TOC, hide side TOC
   * ================================================= */

  /* On large screens (xl+): Hide the popover TOC */
  @media (min-width: 1280px) {
    button[data-toc-popover-trigger],
    div[data-toc-popover-content] {
      display: none !important;
    }
  }

  /* On smaller screens (<xl): Hide the side TOC */
  @media (max-width: 1279px) {
    #nd-toc {
      display: none !important;
    }
  }
}

@theme inline {
  --animate-shimmer-slide: shimmer-slide var(--speed) ease-in-out infinite alternate;
  --animate-spin-around: spin-around calc(var(--speed) * 2) infinite linear;
  @keyframes shimmer-slide {
  to {
    transform: translate(calc(100cqw - 100%), 0);
    }
  }
  @keyframes spin-around {
  0% {
    transform: translateZ(0) rotate(0);
    }
  15%, 35% {
    transform: translateZ(0) rotate(90deg);
    }
  65%, 85% {
    transform: translateZ(0) rotate(270deg);
    }
  100% {
    transform: translateZ(0) rotate(360deg);
    }
  }
  --animate-gradient: gradient 8s linear infinite
;
  @keyframes gradient {
  to {
    background-position: var(--bg-size, 300%) 0;
    }
  }
  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;
  @keyframes marquee {
  from {
    transform: translateX(0);
    }
  to {
    transform: translateX(calc(-100% - var(--gap)));
    }
  }
  @keyframes marquee-vertical {
  from {
    transform: translateY(0);
    }
  to {
    transform: translateY(calc(-100% - var(--gap)));
    }
  }}

/* Base styling is provided by fumadocs-ui/css/preset.css */

/* =========================================
   REMOTE CONTENT STYLING
   Styles for README, changelog, and rule docs
   fetched from GitHub
   ========================================= */

/* Badge images should be inline with gap */
.remote-readme a > img,
.remote-changelog a > img,
.remote-rule-doc a > img {
  display: inline-block !important;
  vertical-align: middle;
  height: auto;
}

/* Center-aligned divs (logo, tagline, badges) - transformed from <p align> */
.remote-readme div[align="center"],
.remote-changelog div[align="center"],
.remote-rule-doc div[align="center"] {
  text-align: center;
  display: flex !important;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 0.35rem;
  margin-bottom: 0.5rem;
}

/* Badge links in centered divs should be inline */
.remote-readme div[align="center"] a,
.remote-changelog div[align="center"] a,
.remote-rule-doc div[align="center"] a {
  display: inline-flex !important;
  align-items: center;
}

/* Ensure images don't break layout */
.remote-readme img,
.remote-changelog img,
.remote-rule-doc img {
  max-width: 100%;
  height: auto;
}